(function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="5f4f")})({"01f9":function(t,e,n){"use strict";var r=n("2d00"),i=n("5ca1"),o=n("2aba"),a=n("32e9"),c=n("84f2"),u=n("41a0"),f=n("7f20"),s=n("38fd"),h=n("2b4c")("iterator"),l=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",g="values",d=function(){return this};t.exports=function(t,e,n,y,b,m,x){u(n,e,y);var w,P,O,j=function(t){if(!l&&t in _)return _[t];switch(t){case v:return function(){return new n(this,t)};case g:return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",M=b==g,S=!1,_=t.prototype,A=_[h]||_[p]||b&&_[b],E=A||j(b),G=b?M?j("entries"):E:void 0,T="Array"==e&&_.entries||A;if(T&&(O=s(T.call(new t)),O!==Object.prototype&&O.next&&(f(O,k,!0),r||"function"==typeof O[h]||a(O,h,d))),M&&A&&A.name!==g&&(S=!0,E=function(){return A.call(this)}),r&&!x||!l&&!S&&_[h]||a(_,h,E),c[e]=E,c[k]=d,b)if(w={values:M?E:j(g),keys:m?E:j(v),entries:G},x)for(P in w)P in _||o(_,P,w[P]);else i(i.P+i.F*(l||S),e,w);return w}},"02f4":function(t,e,n){var r=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var o,a,c=String(i(e)),u=r(n),f=c.length;return u<0||u>=f?t?"":void 0:(o=c.charCodeAt(u),o<55296||o>56319||u+1===f||(a=c.charCodeAt(u+1))<56320||a>57343?t?c.charAt(u):o:t?c.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"0d58":function(t,e,n){var r=n("ce10"),i=n("e11e");t.exports=Object.keys||function(t){return r(t,i)}},1495:function(t,e,n){var r=n("86cc"),i=n("cb7c"),o=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){i(t);var n,a=o(e),c=a.length,u=0;while(c>u)r.f(t,n=a[u++],e[n]);return t}},"1c4c":function(t,e,n){"use strict";var r=n("9b43"),i=n("5ca1"),o=n("4bf8"),a=n("1fa8"),c=n("33a4"),u=n("9def"),f=n("f1ae"),s=n("27ee");i(i.S+i.F*!n("5cc5")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,l=o(t),p="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,d=void 0!==g,y=0,b=s(l);if(d&&(g=r(g,v>2?arguments[2]:void 0,2)),void 0==b||p==Array&&c(b))for(e=u(l.length),n=new p(e);e>y;y++)f(n,y,d?g(l[y],y):l[y]);else for(h=b.call(l),n=new p;!(i=h.next()).done;y++)f(n,y,d?a(h,g,[i.value,y],!0):i.value);return n.length=y,n}})},"1fa8":function(t,e,n){var r=n("cb7c");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&r(o.call(t)),a}}},"230e":function(t,e,n){var r=n("d3f4"),i=n("7726").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},"23c6":function(t,e,n){var r=n("2d95"),i=n("2b4c")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(c=r(e))&&"function"==typeof e.callee?"Arguments":c}},"27ee":function(t,e,n){var r=n("23c6"),i=n("2b4c")("iterator"),o=n("84f2");t.exports=n("8378").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},"2aba":function(t,e,n){var r=n("7726"),i=n("32e9"),o=n("69a8"),a=n("ca5a")("src"),c="toString",u=Function[c],f=(""+u).split(c);n("8378").inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,c){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||i(n,a,t[e]?""+t[e]:f.join(String(e)))),t===r?t[e]=n:c?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,c,function(){return"function"==typeof this&&this[a]||u.call(this)})},"2aeb":function(t,e,n){var r=n("cb7c"),i=n("1495"),o=n("e11e"),a=n("613b")("IE_PROTO"),c=function(){},u="prototype",f=function(){var t,e=n("230e")("iframe"),r=o.length,i="<",a=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),f=t.F;while(r--)delete f[u][o[r]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(c[u]=r(t),n=new c,c[u]=null,n[a]=t):n=f(),void 0===e?n:i(n,e)}},"2b4c":function(t,e,n){var r=n("5537")("wks"),i=n("ca5a"),o=n("7726").Symbol,a="function"==typeof o,c=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};c.store=r},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"32e9":function(t,e,n){var r=n("86cc"),i=n("4630");t.exports=n("9e1e")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"33a4":function(t,e,n){var r=n("84f2"),i=n("2b4c")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},"36bd":function(t,e,n){"use strict";var r=n("4bf8"),i=n("77f1"),o=n("9def");t.exports=function(t){var e=r(this),n=o(e.length),a=arguments.length,c=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,f=void 0===u?n:i(u,n);while(f>c)e[c++]=t;return e}},"38fd":function(t,e,n){var r=n("69a8"),i=n("4bf8"),o=n("613b")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"41a0":function(t,e,n){"use strict";var r=n("2aeb"),i=n("4630"),o=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},4588:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,n){var r=n("be13");t.exports=function(t){return Object(r(t))}},5537:function(t,e,n){var r=n("8378"),i=n("7726"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("2d00")?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,n){var r=n("7726"),i=n("8378"),o=n("32e9"),a=n("2aba"),c=n("9b43"),u="prototype",f=function(t,e,n){var s,h,l,p,v=t&f.F,g=t&f.G,d=t&f.S,y=t&f.P,b=t&f.B,m=g?r:d?r[e]||(r[e]={}):(r[e]||{})[u],x=g?i:i[e]||(i[e]={}),w=x[u]||(x[u]={});for(s in g&&(n=e),n)h=!v&&m&&void 0!==m[s],l=(h?m:n)[s],p=b&&h?c(l,r):y&&"function"==typeof l?c(Function.call,l):l,m&&a(m,s,l,t&f.U),x[s]!=l&&o(x,s,p),y&&w[s]!=l&&(w[s]=l)};r.core=i,f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},"5cc5":function(t,e,n){var r=n("2b4c")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],c=o[r]();c.next=function(){return{done:n=!0}},o[r]=function(){return c},t(o)}catch(a){}return n}},"5df3":function(t,e,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},"5f4f":function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){return r(t)||i(t)||o()}n.r(e);n("6c7b"),n("5df3"),n("1c4c");function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){function t(e){c(this,t),s(this,"image",null),s(this,"energy",[]),s(this,"M",[]),s(this,"backtrack",[]),this.image=e,this.energy=[],this.M=[],this.backtrack=[]}return f(t,[{key:"init",value:function(){}},{key:"calculateEnergy",value:function(){for(var t=[[1,0,-1],[2,0,-2],[1,0,-1]],e=[[1,2,1],[0,0,0],[-1,-2,-1]],n=[],r=0;r<this.image.height;r++)for(var i=0;i<this.image.width;i++){var o=Math.abs(this.convolveGrayPixel3x3(i,r,t,this.image.data))+Math.abs(this.convolveGrayPixel3x3(i,r,e,this.image.data));n.push(o)}this.energy=n}},{key:"convolveGrayPixel3x3",value:function(t,e,n,r){var i=this.getPixel(t,e,r,!0),o=this.getPixel(t,e-1,r,!0),a=this.getPixel(t+1,e-1,r,!0),c=this.getPixel(t+1,e,r,!0),u=this.getPixel(t+1,e+1,r,!0),f=this.getPixel(t,e+1,r,!0),s=this.getPixel(t-1,e+1,r,!0),h=this.getPixel(t-1,e,r,!0),l=this.getPixel(t-1,e-1,r,!0),p=parseInt(n[0][0]*this.getGrayValue(l)+n[0][1]*this.getGrayValue(o)+n[0][2]*this.getGrayValue(a)+n[1][0]*this.getGrayValue(h)+n[1][1]*this.getGrayValue(i)+n[1][2]*this.getGrayValue(c)+n[2][0]*this.getGrayValue(s)+n[2][1]*this.getGrayValue(f)+n[2][2]*this.getGrayValue(u));return p}},{key:"getGrayValue",value:function(t){return parseInt((t[0]+t[1]+t[2])/3)}},{key:"getPixel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=0,a=0;r&&(t<0?o=1:t===this.image.width&&(o=-1),e<0?a=1:e===this.image.height&&(a=-1));var c=4*((e+a)*this.image.width+(t+o));return i&&console.log("x,y",t,e,c,n),[n[c],n[c+1],n[c+2],n[c+3]]}},{key:"removePixel",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n&&(e.splice(t+3,1),e.splice(t+2,1),e.splice(t+1,1)),e.splice(t+0,1)}},{key:"calculateMinimumSeam",value:function(){for(var t=Array.from(this.energy),e=new Array(this.image.width*this.image.height).fill(0),n=1;n<this.image.height;n++)for(var r=0;r<this.image.width;r++){var i=t[(n-1)*this.image.width+(r-1)],o=t[(n-1)*this.image.width+r],a=t[(n-1)*this.image.width+(r+1)],c=[];0===r?c.push(o,a):r===this.image.width-1?c.push(i,o):c.push(i,o,a);var u=c.indexOf(Math.min.apply(Math,c));e[n*this.image.width+r]=r+u-1,t[n*this.image.width+r]+=c[u]}this.backtrack=e,this.M=t}},{key:"carve",value:function(t){console.log("- start carving -");for(var e=t.width+t.height,n=0,r=0;r<t.width;r++)this.carveColumn(),n++,self.postMessage({action:"percentage",percentage:n/e});if(t.height>0){this.rotate();for(var i=0;i<t.height;i++)this.carveColumn(),n++,self.postMessage({action:"percentage",percentage:n/e});this.rotate()}return console.log("- carving finished -"),{height:this.image.height,width:this.image.width,data:this.image.data,M:this.M,backtrack:this.backtrack}}},{key:"rotate",value:function(){for(var t=[],e=[],n=0;n<this.image.width;n++)for(var r=0;r<this.image.height;r++){var i=4*(r*this.image.width+n);t.push(this.image.data[i],this.image.data[i+1],this.image.data[i+2],this.image.data[i+3]),e.push(this.energy[i])}this.image.data=t;var o=this.image.width;this.image.width=this.image.height,this.image.height=o,this.energy=e}},{key:"carveColumn",value:function(){this.calculateEnergy(),this.calculateMinimumSeam();for(var t=this.M.slice((this.image.height-1)*this.image.width,this.image.height*this.image.width),e=t.indexOf(Math.min.apply(Math,a(t))),n=Array.from(this.image.data),r=this.image.height-1;r>=0;r--){var i=r*this.image.width+e;this.carvePixel(i,n),e=this.backtrack[i]}this.image.width-=1,this.image.data=n}},{key:"carvePixel",value:function(t,e){this.removePixel(4*t,e),this.removePixel(t,this.energy,!1),this.removePixel(t+1,this.M,!1),this.removePixel(t+1,this.backtrack,!1)}},{key:"setPixel",value:function(t,e,n,r,i){e[t]=n,e[t+1]=r,e[t+2]=i,e[t+3]=255}}]),t}();self.addEventListener("message",function(t){if("seam-carving"===t.data.action){var e=t.data,n=new h(e.image);n.init();var r={image:n.carve(e.resize),action:"done"};self.postMessage(r)}},!1)},"613b":function(t,e,n){var r=n("5537")("keys"),i=n("ca5a");t.exports=function(t){return r[t]||(r[t]=i(t))}},"626a":function(t,e,n){var r=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},6821:function(t,e,n){var r=n("626a"),i=n("be13");t.exports=function(t){return r(i(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"6a99":function(t,e,n){var r=n("d3f4");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"6c7b":function(t,e,n){var r=n("5ca1");r(r.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var r=n("4588"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f20":function(t,e,n){var r=n("86cc").f,i=n("69a8"),o=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},8378:function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,n){var r=n("cb7c"),i=n("c69a"),o=n("6a99"),a=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(c){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"9b43":function(t,e,n){var r=n("d8e8");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var r=n("2b4c")("unscopables"),i=Array.prototype;void 0==i[r]&&n("32e9")(i,r,{}),t.exports=function(t){i[r][t]=!0}},"9def":function(t,e,n){var r=n("4588"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,n){var r=n("6821"),i=n("9def"),o=n("77f1");t.exports=function(t){return function(e,n,a){var c,u=r(e),f=i(u.length),s=o(a,f);if(t&&n!=n){while(f>s)if(c=u[s++],c!=c)return!0}else for(;f>s;s++)if((t||s in u)&&u[s]===n)return t||s||0;return!t&&-1}}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},ca5a:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},cb7c:function(t,e,n){var r=n("d3f4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},ce10:function(t,e,n){var r=n("69a8"),i=n("6821"),o=n("c366")(!1),a=n("613b")("IE_PROTO");t.exports=function(t,e){var n,c=i(t),u=0,f=[];for(n in c)n!=a&&r(c,n)&&f.push(n);while(e.length>u)r(c,n=e[u++])&&(~o(f,n)||f.push(n));return f}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f1ae:function(t,e,n){"use strict";var r=n("86cc"),i=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},fab2:function(t,e,n){var r=n("7726").document;t.exports=r&&r.documentElement}});
//# sourceMappingURL=31abf4dd256583ccb04c.worker.js.map